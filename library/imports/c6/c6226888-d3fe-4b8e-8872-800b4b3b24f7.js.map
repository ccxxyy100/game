{"version":3,"sources":["assets\\Script\\launch_scene.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { SceneNames } from \"./data/const\";\r\nimport { ScreenAdapter, ScreenFit } from \"./utils/screen_adapt\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class LaunchScene extends cc.Component {\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        ScreenAdapter.adaptScreenSize(this.node, ScreenFit.SHOW_ALL);\r\n        ScreenAdapter.adaptScreenSize(this.node.getChildByName('bg'), ScreenFit.NO_BORDER);\r\n        \r\n        displayInit();\r\n    }\r\n\r\n    start () {\r\n        cc.director.preloadScene(SceneNames.play,null,()=>{\r\n            cc.director.loadScene(SceneNames.play);\r\n        })\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n\r\n\r\nfunction displayInit(){\r\n    let getFrameSize = cc.view.getFrameSize();\r\n    let getCanvasSize = cc.view.getCanvasSize();\r\n    let getScaleX = cc.view.getScaleX();\r\n    let getScaleY = cc.view.getScaleY();\r\n    let getDesignResolutionSize = cc.view.getDesignResolutionSize();\r\n    let getVisibleSize = cc.view.getVisibleSize();\r\n    let getDevicePixelRatio = cc.view.getDevicePixelRatio();\r\n    cc.log(\"--------cc.view\",JSON.stringify({\r\n        getFrameSize:getFrameSize,\r\n        getCanvasSize:getCanvasSize,\r\n        getScaleX:getScaleX,\r\n        getScaleY:getScaleY,\r\n        getDesignResolutionSize:getDesignResolutionSize,\r\n        getVisibleSize:getVisibleSize,\r\n        getDevicePixelRatio:getDevicePixelRatio,\r\n    },null,\"  \"))\r\n\r\n    display.width = getVisibleSize.width;\r\n    display.height = getVisibleSize.height;\r\n    display.cx = display.width*0.5;\r\n    display.cy = display.height*0.5;\r\n    display.gapHeight = getVisibleSize.height - getDesignResolutionSize.height;\r\n    \r\n    let langCode = cc.sys.languageCode.toLowerCase();\r\n    langCode = langCode.replace(\"-\",\"_\");//统一用\"-\"区分\r\n    let arr = langCode.split(\"_\");\r\n    let lang = arr[0];\r\n    let region = langCode.substring(lang.length);\r\n    if(region.substr(0,1)==\"_\"){\r\n        region = region.substring(1)\r\n    }\r\n    display.sys_lang = lang;\r\n    if(lang==\"zh\"){//中文还特地在后面标明了简体繁体，去掉，防止PHP不识别\r\n        //示例：zh_cn_#hans zh_us_#hans zh_tw_#hant ja_tw en_tw en_gb en_us\r\n        region = region.replace(\"hans\",\"\");\r\n        region = region.replace(\"hant\",\"\");\r\n        region = region.replace(\"#\",\"\");\r\n        region = region.replace(\"_\",\"\");\r\n        region = region.replace(\"-\",\"\");\r\n        region = region.replace(\"=\",\"\");\r\n    }\r\n    display.sys_region = region\r\n    display.sys_langCode = lang+\"_\"+region;\r\n    \r\n    let visible = cc.view.getVisibleSize();\r\n    let design = cc.Canvas.instance.designResolution;\r\n    display.screenScale = cc.v2(visible.width / design.width, visible.height / design.height)\r\n    display.aspectRatio = visible.height/visible.width;\r\n    display.isLongScreen = display.aspectRatio>=2.0\r\n    cc.log(\"================display start=============\")\r\n    for(let k of Object.keys(display)){\r\n        cc.log(`------------display.${k} = ${display[k]}`)\r\n    }\r\n    cc.log(\"================display end=============\")\r\n}"]}