{"version":3,"sources":["assets\\Script\\utils\\audio_util.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAM,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAE5C,IAAY,SAKX;AALD,WAAY,SAAS;IACjB,0CAA6B,CAAA;IAC7B,gDAAmC,CAAA;IACnC,0CAA6B,CAAA;IAC7B,0CAA6B,CAAA;AACjC,CAAC,EALW,SAAS,GAAT,iBAAS,KAAT,iBAAS,QAKpB;AAED;IAAA;IA8CA,CAAC;IA7CU,oBAAU,GAAjB;QACI,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,KAAI,IAAI,GAAG,IAAI,SAAS,EAAC;YACrB,IAAI,IAAI,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC;YAC1B,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;SACjB;QACD,EAAE,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC9B,CAAC;IACM,mBAAS,GAAhB;QACI,KAAI,IAAI,GAAG,IAAI,SAAS,EAAC;YACrB,IAAI,IAAI,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC;YAC1B,EAAE,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,EAAC,EAAE,CAAC,SAAS,CAAC,CAAC;SAC3C;IACL,CAAC;IAEY,oBAAU,GAAvB,UAAwB,IAAqB,EAAC,MAAQ;QAAR,uBAAA,EAAA,UAAQ;;;;;4BACvC,qBAAM,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAA;;wBAAhC,IAAI,GAAG,SAAyB;wBACpC,sBAAO,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAC,KAAK,EAAC,MAAM,CAAC,EAAC;;;;KACjD;IAED;;;OAGG;IACU,6BAAmB,GAAhC,UAAiC,IAAW;;;;;4BAC7B,qBAAM,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS,CAAC,EAAA;;wBAA/C,IAAI,GAAG,SAAwC;wBAC/C,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAC,KAAK,EAAC,GAAG,CAAC,CAAC;wBACzC,GAAG,GAAG,GAAG,GAAC,IAAI,CAAC;wBACnB,UAAU,CAAC;4BACP,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;wBAC3B,CAAC,EAAE,GAAG,GAAC,IAAI,CAAC,CAAC;;;;;KAChB;IAEqB,kBAAQ,GAA9B,UAA+B,IAAW;;;gBACtC,sBAAO,IAAI,OAAO,CAAe,UAAU,MAAM,EAAC,MAAM;wBACpD,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,EAAC,EAAE,CAAC,SAAS,EAAC,UAAC,GAAS,EAAC,IAAiB;4BAC5D,IAAG,GAAG,EAAC;gCACH,cAAc;gCACd,MAAM,CAAC,IAAI,CAAC,CAAA;6BACf;iCAAI;gCACD,MAAM,CAAC,IAAI,CAAC,CAAA;6BACf;wBACL,CAAC,CAAC,CAAA;oBACN,CAAC,CAAC,EAAA;;;KACL;IACL,gBAAC;AAAD,CA9CA,AA8CC,IAAA;AA9CY,8BAAS","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\r\n\r\nexport enum AudioEnum{\r\n    button = \"audio/Button_Click\",\r\n    finishOne = \"audio/ContainerFinish\",\r\n    pourWater = \"audio/pourWater\",\r\n    youWin = \"audio/Show_Victory\",\r\n}\r\n\r\nexport class AudioUtil{\r\n    static preloadAll(){\r\n        let arr = [];\r\n        for(let key in AudioEnum){\r\n            let path = AudioEnum[key];\r\n            arr.push(path)\r\n        }\r\n        cc.resources.preload(arr);\r\n    }\r\n    static unloadAll(){\r\n        for(let key in AudioEnum){\r\n            let path = AudioEnum[key];\r\n            cc.resources.release(path,cc.AudioClip);\r\n        }\r\n    }\r\n\r\n    static async playEffect(path:AudioEnum|string,volume=1){\r\n        let clip = await this.loadClip(path);\r\n        return cc.audioEngine.play(clip,false,volume);\r\n    }\r\n\r\n    /**\r\n     * 播放倒水声音，根据倒水容量播放不同的时间\r\n     * @param time 【0,1】\r\n     */\r\n    static async playPourWaterEffect(time:number){\r\n        let clip = await this.loadClip(AudioEnum.pourWater);\r\n        let id = cc.audioEngine.play(clip,false,1.0);\r\n        let dur = 3.0*time;\r\n        setTimeout(() => {\r\n            cc.audioEngine.stop(id)\r\n        }, dur*1000);\r\n    }\r\n\r\n    private static  async loadClip(path:string){\r\n        return new Promise<cc.AudioClip>(function (resove,reject) {\r\n            cc.resources.load(path,cc.AudioClip,(err:Error,clip:cc.AudioClip)=>{\r\n                if(err){\r\n                    // reject(err)\r\n                    resove(null)\r\n                }else{\r\n                    resove(clip)\r\n                }\r\n            })\r\n        })\r\n    }\r\n}"]}