{"version":3,"sources":["assets\\Script\\play_scene.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACA,oDAAkD;AAClD,kDAAgD;AAChD,iDAA0D;AAC1D,yCAAwC;AAGlC,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAuC,6BAAY;IAAnD;QAAA,qEAqDC;QAnDW,YAAM,GAAW,IAAI,CAAC;QAEtB,gBAAU,GAAY,IAAI,CAAC;QAE3B,oBAAc,GAAY,IAAI,CAAC;;IA+C3C,CAAC;IA7CG,0BAAM,GAAN;QACI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,cAAc,EAAC,IAAI,CAAC,gBAAgB,EAAC,IAAI,CAAC,CAAC;QAC/D,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,EAAC,IAAI,CAAC,YAAY,EAAC,IAAI,CAAC,CAAC;IAC1D,CAAC;IAED,6BAAS,GAAT;QACI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,cAAc,EAAC,IAAI,CAAC,gBAAgB,EAAC,IAAI,CAAC,CAAC;QAChE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,SAAS,EAAC,IAAI,CAAC,YAAY,EAAC,IAAI,CAAC,CAAC;IAC3D,CAAC;IAED,yBAAK,GAAL;QACI,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,WAAS,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAI,CAAA;QAC1D,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,GAAC,EAAE,CAAC;IAC/D,CAAC;IAED,oCAAgB,GAAhB;QAAA,iBAOC;QANG,sBAAS,CAAC,UAAU,CAAC,sBAAS,CAAC,MAAM,CAAC,CAAC;QACvC,sBAAS,CAAC,IAAI,CAAC;YACX,KAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAA;YACvB,KAAI,CAAC,UAAU,CAAC,MAAM,GAAG,WAAS,KAAI,CAAC,MAAM,CAAC,QAAQ,EAAI,CAAA;YAC1D,KAAI,CAAC,cAAc,CAAC,MAAM,GAAG,KAAI,CAAC,MAAM,CAAC,YAAY,EAAE,GAAC,EAAE,CAAC;QAC/D,CAAC,CAAC,CAAA;IACN,CAAC;IAED,gCAAY,GAAZ;QACI,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,GAAC,EAAE,CAAC;IAC/D,CAAC;IAED,iCAAa,GAAb;QACI,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC;QACxB,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,GAAC,EAAE,CAAC;IAC/D,CAAC;IAED,iCAAa,GAAb;QACI,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC;QACzB,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,GAAC,EAAE,CAAC;IAC/D,CAAC;IAED,6BAAS,GAAT;IAEA,CAAC;IAED,iCAAa,GAAb;QACI,wBAAU,CAAC,IAAI,EAAE,CAAC;IACtB,CAAC;IAlDD;QADC,QAAQ,CAAC,eAAM,CAAC;6CACa;IAE9B;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;iDACgB;IAEnC;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;qDACoB;IANtB,SAAS;QAD7B,OAAO;OACa,SAAS,CAqD7B;IAAD,gBAAC;CArDD,AAqDC,CArDsC,EAAE,CAAC,SAAS,GAqDlD;kBArDoB,SAAS","file":"","sourceRoot":"/","sourcesContent":["\r\nimport { DlgSetting } from \"./dialog/dlg_setting\";\r\nimport { DlgYouWin } from \"./dialog/dlg_youWIn\";\r\nimport { AudioEnum, AudioUtil } from \"./utils/audio_util\";\r\nimport { CupMgr } from \"./views/cupMgr\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PlayScene extends cc.Component {\r\n    @property(CupMgr)\r\n    private cupMgr: CupMgr = null;\r\n    @property(cc.Label)\r\n    private text_level:cc.Label = null;\r\n    @property(cc.Label)\r\n    private text_actionNum:cc.Label = null;\r\n\r\n    onLoad(){\r\n        this.cupMgr.node.on(\"level_finish\",this.onFinishOneLevel,this);\r\n        this.cupMgr.node.on(\"do_pour\",this.onPourAction,this);\r\n    }\r\n\r\n    onDestroy(){\r\n        this.cupMgr.node.off(\"level_finish\",this.onFinishOneLevel,this);\r\n        this.cupMgr.node.off(\"do_pour\",this.onPourAction,this);\r\n    }\r\n\r\n    start(){\r\n        this.text_level.string = `level_${this.cupMgr.getLevel()}`\r\n        this.text_actionNum.string = this.cupMgr.getActionNum()+'';\r\n    }\r\n\r\n    onFinishOneLevel(){\r\n        AudioUtil.playEffect(AudioEnum.youWin);\r\n        DlgYouWin.show(()=>{\r\n            this.cupMgr.nextLevel()\r\n            this.text_level.string = `level_${this.cupMgr.getLevel()}`\r\n            this.text_actionNum.string = this.cupMgr.getActionNum()+'';\r\n        })\r\n    }\r\n\r\n    onPourAction(){\r\n        this.text_actionNum.string = this.cupMgr.getActionNum()+'';\r\n    }\r\n\r\n    onBtn_restart(){\r\n        this.cupMgr.nextLevel();\r\n        this.text_actionNum.string = this.cupMgr.getActionNum()+'';\r\n    }\r\n\r\n    onBtn_recover(){\r\n        this.cupMgr.undoAction();\r\n        this.text_actionNum.string = this.cupMgr.getActionNum()+'';\r\n    }\r\n\r\n    onBtn_tip(){\r\n\r\n    }\r\n\r\n    onBtn_setting(){\r\n        DlgSetting.show();\r\n    }\r\n}\r\n"]}